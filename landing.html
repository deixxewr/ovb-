<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LunchTime – лендинг</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/landing.css">
</head>
<body class="landing-body">
<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top shadow-sm">
  <div class="container">
    <a class="navbar-brand fw-bold" href="#">LunchTime</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="#hero">Главная</a></li>
        <li class="nav-item"><a class="nav-link" href="#features">Преимущества</a></li>
        <li class="nav-item"><a class="nav-link" href="#cta">Собрать ланч</a></li>
        <li class="nav-item"><a class="nav-link" href="#contact">Контакты</a></li>
      </ul>
    </div>
  </div>
</nav>

<section id="hero" class="py-5 mt-5">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6 mb-4 mb-lg-0">
        <h1 class="display-5 fw-bold mb-3">Горячие бизнес-ланчи в ваш офис</h1>
        <p class="lead mb-4">
          Соберите идеальный ланч из свежих блюд и оформите заказ за пару кликов. Доставка по Москве от 45 минут.
        </p>
        <a href="collect-lunch.html" class="btn btn-primary btn-lg me-2 mb-2">Собрать ланч</a>
        <a href="#features" class="btn btn-outline-secondary btn-lg mb-2">Узнать больше</a>
      </div>
      <div class="col-lg-6 text-center">
        <img id="landing-hero-image" src="" class="img-fluid rounded-4 shadow" alt="Бизнес-ланч">
      </div>
    </div>
  </div>
</section>

<section id="features" class="py-5 bg-light">
  <div class="container">
    <h2 class="text-center mb-4">Почему LunchTime?</h2>
    <div class="row g-4">
      <div class="col-md-4">
        <div class="card h-100 shadow-sm border-0">
          <div class="card-body">
            <h3 class="h5 card-title">Всегда вовремя</h3>
            <p class="card-text">Доставка по Москве от 45 минут. Следим за температурой блюд и временем пути.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card h-100 shadow-sm border-0">
          <div class="card-body">
            <h3 class="h5 card-title">Гибкие комплекты</h3>
            <p class="card-text">Соберите ланч из супа, горячего, салата, напитка и десерта — или выберите готовый набор.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card h-100 shadow-sm border-0">
          <div class="card-body">
            <h3 class="h5 card-title">Корпоративные условия</h3>
            <p class="card-text">Предоставляем скидки и безналичную оплату для компаний любого размера.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="cta" class="py-5">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-8">
        <h2 class="fw-bold mb-3">Готовы к вкусному перерыву?</h2>
        <p class="lead mb-3">
          Перейдите на страницу «Собрать ланч», выберите блюда и оформите заказ онлайн.
        </p>
        <p class="mb-0 text-muted">Минимальная сумма заказа — 800 ₽. Работаем ежедневно с 7:00 до 23:00.</p>
      </div>
      <div class="col-lg-4 text-lg-end mt-3 mt-lg-0">
        <a href="collect-lunch.html" class="btn btn-primary btn-lg">Перейти к меню</a>
      </div>
    </div>
  </div>
</section>

<section id="contact" class="py-5 bg-light">
  <div class="container">
    <div class="row g-4">
      <div class="col-lg-6">
        <h2 class="mb-3">Свяжитесь с нами</h2>
        <p>Оставьте заявку, и мы перезвоним вам, чтобы обсудить условия питания для вашей компании.</p>
        <ul class="list-unstyled mb-0">
          <li><strong>Телефон:</strong> <a href="tel:+74951234567">+7 (495) 123-45-67</a></li>
          <li><strong>Email:</strong> <a href="mailto:info@lunchtime.ru">info@lunchtime.ru</a></li>
          <li><strong>Адрес:</strong> Москва, деловой центр «Сити»</li>
        </ul>
      </div>
      <div class="col-lg-6">
        <form action="https://httpbin.org/post" method="post" class="p-4 bg-white rounded-4 shadow-sm">
          <div class="mb-3">
            <label class="form-label">Компания</label>
            <input type="text" class="form-control" name="company" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Контактное лицо</label>
            <input type="text" class="form-control" name="person" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Email</label>
            <input type="email" class="form-control" name="email" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Комментарий</label>
            <textarea class="form-control" name="comment" rows="3"></textarea>
          </div>
          <button type="submit" class="btn btn-primary w-100">Отправить заявку</button>
        </form>
      </div>
    </div>
  </div>
</section>

<footer class="py-3 border-top">
  <div class="container text-center text-muted small">
    © 2025 LunchTime — доставка бизнес-ланчей
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/config.js"></script>
<script src="js/dishes-api.js"></script>
<script>
// Ждем загрузки DOM и Bootstrap
document.addEventListener("DOMContentLoaded", async () => {
  // Инициализация Bootstrap collapse для мобильного меню
  const navbarToggler = document.querySelector('.navbar-toggler');
  const navbarCollapse = document.querySelector('#navbarNav');
  
  let bsCollapse = null;
  if (navbarToggler && navbarCollapse) {
    // Используем Bootstrap API для управления collapse
    bsCollapse = new bootstrap.Collapse(navbarCollapse, {
      toggle: false
    });
    
    navbarToggler.addEventListener('click', () => {
      bsCollapse.toggle();
    });
  }
  
  // Обработчик для навигационных ссылок в меню - используем делегирование на body для раннего перехвата
  document.body.addEventListener('click', function (e) {
    // Проверяем, что клик был по навигационной ссылке
    const link = e.target.closest('.navbar-nav .nav-link');
    if (!link) return;
    
    const href = link.getAttribute('href');
    if (!href || !href.startsWith('#')) return;
    
    e.preventDefault();
    e.stopImmediatePropagation(); // Останавливаем все остальные обработчики
    
    // Закрываем мобильное меню, если оно открыто
    const shouldCloseMenu = bsCollapse && navbarCollapse && window.innerWidth < 992 && navbarCollapse.classList.contains('show');
    if (shouldCloseMenu) {
      bsCollapse.hide();
    }
    
    // Функция прокрутки
    const scrollToTop = () => {
      window.scrollTo({ top: 0, left: 0, behavior: 'smooth' });
      // Альтернативный способ для старых браузеров
      if (document.documentElement.scrollTop > 0) {
        document.documentElement.scrollTop = 0;
      }
      if (document.body.scrollTop > 0) {
        document.body.scrollTop = 0;
      }
    };
    
    // Обработка ссылки "Главная" (#hero) - всегда прокручиваем в самый верх
    if (href === '#hero') {
      scrollToTop();
    } else if (href.length > 1) {
      // Обработка других якорных ссылок
      const target = document.querySelector(href);
      if (target) {
        const offsetTop = target.offsetTop - 70; // Учитываем высоту фиксированного навбара
        window.scrollTo({ top: Math.max(0, offsetTop), left: 0, behavior: 'smooth' });
      }
    }
  }, true); // Используем capture phase для перехвата до Bootstrap
  
  // Плавная прокрутка для остальных якорных ссылок на странице (кнопки в контенте и т.д.)
  document.querySelectorAll('section a[href^="#"]').forEach(anchor => {
    // Проверяем, что это не навигационная ссылка
    if (!anchor.closest('.navbar-nav')) {
      anchor.addEventListener('click', function (e) {
        const href = this.getAttribute('href');
        if (href && href !== '#' && href.length > 1) {
          e.preventDefault();
          const target = document.querySelector(href);
          if (target) {
            const offsetTop = target.offsetTop - 70;
            window.scrollTo({
              top: Math.max(0, offsetTop),
              behavior: 'smooth'
            });
          }
        }
      });
    }
  });
  
  // Загрузка изображения из API
  try {
    const dishes = await loadDishes();
    // Ищем главное блюдо или суп для изображения
    const mainDish = dishes.find(d => d.category === "main") || dishes.find(d => d.category === "soup") || dishes[0];
    if (mainDish && mainDish.image) {
      const img = document.getElementById("landing-hero-image");
      if (img) {
        img.src = mainDish.image;
        img.alt = mainDish.name || "Бизнес-ланч";
      }
    }
  } catch (error) {
    console.error("Ошибка загрузки изображения из API:", error);
    // Fallback на локальное изображение
    const img = document.getElementById("landing-hero-image");
    if (img) {
      img.src = "images/main1.jpg";
    }
  }
});
</script>
</body>
</html>
